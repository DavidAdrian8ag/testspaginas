<!DOCTYPE html>
<html lang="es">

<head>
   <meta charset="UTF-8">
   <title>Suertudota</title>

   <!-- Viewport optimizado para iPhone -->
   <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

   <link rel="stylesheet" href="https://public.codepenassets.com/css/normalize-5.0.0.min.css">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
   <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Rajdhani:400,700">
   <link rel="icon" href="ruleta.ico" type="image/x-icon">

   <style>
      body {
         background-color: #4e4d4a;
         width: 100vw;
         min-height: 100vh;
         margin: 0;
         padding-bottom: env(safe-area-inset-bottom);
      }

      .wish {
         text-align: center;
         margin: 0;
         padding: 20px 10px;
         font-family: "Rajdhani", sans-serif;
         text-transform: uppercase;
         font-size: clamp(28px, 6vw, 60px);
         font-weight: bold;
         color: #5a6b65;
         background-color: #FFE5D9;
      }

      .container {
         margin: 0 auto 40px;
         width: 100%;
         max-width: 400px;
         display: flex;
         flex-direction: column;
         align-items: center;
      }

      .arrow {
         width: 70px;
         height: 16px;
         background-color: #FFE5D9;
         margin: 20px auto;
         position: relative;
      }

      .arrow:after {
         content: "";
         width: 0;
         height: 0;
         border-style: solid;
         border-width: 25px 45px 0;
         border-color: #FFE5D9 transparent;
         position: absolute;
         top: 16px;
         left: -10px;
      }

      .wheel {
         width: min(90vw, 400px);
         height: min(90vw, 400px);
         border-radius: 50%;
         position: relative;
         overflow: hidden;
      }

      .inner-wheel {
         width: 100%;
         height: 100%;
         border-radius: 50%;
         transition: transform 3.5s cubic-bezier(0.33, 1, 0.68, 1);
      }

      .spin-button {
         position: absolute;
         width: 55px;
         height: 55px;
         background-color: #373B44;
         border-radius: 50%;
         top: 50%;
         left: 50%;
         transform: translate(-50%, -50%);
         z-index: 10;
         cursor: pointer;
      }

      .spin-button:after {
         content: "Girar";
         position: absolute;
         top: 18px;
         left: 10px;
         color: white;
         font-size: 14px;
         font-family: "Rajdhani", sans-serif;
      }

      .section {
         position: absolute;
         width: 0;
         height: 0;
         border-style: solid;
         border-width: 200px 116px 0;
         left: calc(50% - 116px);
         top: 0;
         transform-origin: 116px 200px;
         border-color: #5a6b65 transparent;
      }

      .section:nth-child(2) { transform: rotate(60deg); border-color: #c9b7b0 transparent; }
      .section:nth-child(3) { transform: rotate(120deg); border-color: #5a6b65 transparent; }
      .section:nth-child(4) { transform: rotate(180deg); border-color: #d5a5a0 transparent; }
      .section:nth-child(5) { transform: rotate(240deg); border-color: #c9b1b2 transparent; }
      .section:nth-child(6) { transform: rotate(300deg); border-color: #BD9391 transparent; }

      span {
         position: relative;
         display: inline-block;
         margin-left: -67px;
         top: -185px;
         font-family: "Rajdhani", sans-serif;
      }

      /* ICONOS */
      .fa {
         font-size: 50px;
      }

      .winner-box {
         display: none;
         text-align: center;
         background-color: #FFE5D9;
         color: #373B44;
         font-family: "Rajdhani", sans-serif;
         border-radius: 14px;
         padding: 18px;
         width: 90%;
         max-width: 320px;
         margin-top: 25px;
         box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
         animation: appear 0.8s ease;
      }

      /* TEXTO DEL PREMIO */
      .winner-box h2 {
         margin: 0;
         font-size: 16px;
         line-height: 1.3;
      }

      .winner-box a {
         display: inline-block;
         margin-top: 15px;
         padding: 12px 22px;
         background-color: #373B44;
         color: #fff;
         border-radius: 10px;
         text-decoration: none;
         font-size: 22px;
      }

      @keyframes appear {
         from { opacity: 0; transform: scale(0.85); }
         to { opacity: 1; transform: scale(1); }
      }

      /* ===================== */
      /* üì± iPhone adjustments */
      /* ===================== */
      @media (max-width: 480px) {
         .fa {
            font-size: 36px;
         }

         .winner-box h2 {
            font-size: 18px;
         }

         .spin-button {
            width: 50px;
            height: 50px;
         }

         .spin-button:after {
            font-size: 13px;
            top: 16px;
            left: 9px;
         }
      }
   </style>
</head>

<body>

   <h1 class="wish">- Toma tu Premio -</h1>

   <div class="container">
      <div class="arrow"></div>

      <div class="wheel">
         <div class="inner-wheel" id="wheel">
            <div class="section"><span class="fa fa-money"></span></div>
            <div class="section"><span class="fa fa-cutlery"></span></div>
            <div class="section"><span class="fa fa-heart"></span></div>
            <div class="section"><span class="fa fa-plane"></span></div>
            <div class="section"><span class="fa fa-gift"></span></div>
            <div class="section"><span class="fa fa-sun-o"></span></div>
         </div>
         <div class="spin-button"></div>
      </div>

      <div class="winner-box" id="winnerBox">
         <h2 id="winnerText">‚ù§Ô∏è ¬°Premio Mayor!</h2>
         <a id="winnerLink" href="./regalo.html" style="display:none;">Ganaste</a>
      </div>
   </div>

   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
   <script>
      $(function () {
         let spins = 0;
         const sections = ["Dinero", "Cena", "Besos", "Viaje", "Sorpresa", "Playa"];

         $('.spin-button').click(function () {
            $('#winnerBox').hide();
            spins++;

            const rand = Math.floor(Math.random() * 1800) + 1;
            const total = spins * 1800 + rand;

            $('#wheel').css('transform', 'rotate(' + total + 'deg)');

            setTimeout(() => {
               const angle = total % 360;
               const index = Math.floor(((360 - angle + 30) % 360) / 60);
               const result = sections[index];

               let msg = "";
               let link = false;

               if (result === "Sorpresa") {
                  msg = "‚ù§Ô∏è ¬°Ganaste una sorpresa especial!";
                  link = true;
               } else {
                  msg = "üòè Buen intento‚Ä¶ gira otra vez";
               }

               $('#winnerText').html(msg);
               link ? $('#winnerLink').show() : $('#winnerLink').hide();
               $('#winnerBox').fadeIn();
            }, 3500);
         });
      });
   </script>

</body>
</html>
